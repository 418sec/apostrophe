{%- import "apostrophe-schemas:macros.html" as schemas -%}

{% macro permissions(field) %}
<h4>Overall Permissions</h4>

<p><input type="checkbox" name="admin" /> Admin: All</p>
<p><em>Allows users to do anything, including creating more users and groups.</em></p>
<p><input type="checkbox" name="guest" /> View content marked "Login Required"</p>

{% for type in apos.permissions.types() %}
  <div data-permissions-{{ type.name }} class="apos-permissions-type">
    <h4>{{ type.label }}</h4>
    <p>
      <input type="checkbox" name="updateany-{{ type.name }}" /> Edit Any 
      <input type="checkbox" name="insert-{{ type.name }}" /> Create New
      <input type="checkbox" name="trash-{{ type.name }}" /> And Move to Trash
    </p>
    <p>
      <input type="checkbox" name="update-{{ type.name }}" /> Users may also be explicitly
      granted permission to edit an individual {{ data.label }}
    </p>
    {# JavaScript will hide all but one of these h5's per the combination
       of permissions given #}
    <h5 data-permissions-summary="">Users do not have permission to edit or create a {{ data.label }}.</h5>
    <h5 data-permissions-summary="updateany-{{ type.name }}">
      Allows users to edit any {{ data.label }}, <span class="apos-permissions-no">but not create a new one or move one to the trash.</span>
    </h5>
    <h5 data-permissions-summary="updateany-{{ type.name }} insert-{{ type.name }}">
      Allows users to edit any {{ data.label }} and to create a new {{ data.label }}, <span class="apos-permissions-no">but not move one to the trash.</span>
    </h5>
    <h5 data-permissions-summary="updateany-{{ type.name }} trash-{{ type.name }}">
      Allows users to edit any {{ data.label }} and move them to the trash, <span class="apos-permissions-no">but not create a new {{ type.label }}.</span>
    </h5>
    <h5 data-permissions-summary="updateany-{{ type.name }} insert-{{ type.name }} trash-{{ type.name }}">
      Allows users to create a new {{ data.label }}, edit an existing {{ data.label }}, and move a {{ data.label }} to the trash.
    </h5>
    <h5 data-permissions-summary="insert-{{ type.name }}">
      Allows users to create a new {{ data.label }}. <span class="apos-permissions-no">They cannot edit any existing {{ data.label }} or move one to the trash.</span>
    </h5>
    <h5 data-permissions-summary="insert-{{ type.name }} update-{{ type.name }}">
      Allows users to create a new {{ data.label }}. They can also edit a {{ data.label }} that they created, or edit a {{ data.label }} for which they have been explicitly given permission. <span class="apos-permissions-no">They cannot move a {{ data.label }} to the trash.</span>
    </h5>
    <h5 data-permissions-summary="insert-{{ type.name }} update-{{ type.name }} trash-{{ type.name }}">
      Allows users to create a new {{ data.label }}. They can also edit a {{ data.label }} that they created, move a {{ data.label }} that they created to the trash, and do the same things with a {{ data.label }} for which they have been explicitly granted permission.
    </h5>
</div>
{% endfor %}

{# Usually implied by something else, so placed here at the end and will be hidden by js
   if implied by other selections #}

<div data-permissions-attachments>
  <h4>Attachments</h4>
  <p><input type="checkbox" name="edit-attachment" /> Upload and crop attachments</p>
</div>
{% endmacro %}

{{ schemas.fieldset(data, permissions) }}

