{# area needs its own copy of the widget options as #}
{# JSON, for adding new widgets #}
{%- set canEdit = data.area._edit and data.options.edit != false -%}
{%- set isSingleton = data.options.limit == 1 and data.options.type -%}

{# data-doc-id is always present for introspection by modules like #}
{# apostrophe-workflow that might need to compare it to a draft version #}
{# that is editable after all #}

<div class="apos-area" {%- if canEdit %} data-apos-area-newly-editable data-options='{{ apos.utils.omit(data.options, 'area') | jsonAttribute({ single: true }) }}' data='{{ data.area | jsonAttribute({ single: true }) }}' data-choices='{{ data.choices | jsonAttribute({ single: true }) }}'{% endif %}>
  {%- if not canEdit -%}
    {%- for widget in data.area.items -%}
      {%- set widgetOptions = data.options.widgets[widget.type] or {} -%}
      {{ apos.areas.widget(widget, widgetOptions) }}
    {%- endfor -%}
  {%- endif -%}
</div>
