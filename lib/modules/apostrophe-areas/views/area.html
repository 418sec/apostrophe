{# area needs its own copy of the widget options as #}
{# JSON, for adding new widgets #}
{%- set isSingleton = data.options.limit == 1 and data.options.type -%}
<div class="apos-area" data-area{%- if data.area._edit %} data-area-edit{% if not data.options.virtual %} data-autosave{% endif %} data-options='{{ apos.utils.omit(data.options, 'area') | jsonAttribute({ single: true }) }}' data-doc-id="{{ data.area._docId }}" data-dot-path="{{ data.area._dotPath }}"{%- endif -%}>
  {%- if data.area._edit -%}
    {%- if isSingleton -%}
      {% include "singletonControls.html" %}
    {%- else -%}
      {% include "areaControls.html" %}
    {%- endif -%}
    <div class="apos-area-widgets" data-widgets>
  {%- endif -%}
  {%- for widget in data.area.items -%}
    {{ apos.areas.widget(widget, data.options.widgets[widget.type]) }}
  {%- endfor -%}
  {%- if data.area._edit -%}
    </div>
  {%- endif -%}
</div>
