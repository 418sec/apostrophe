{%- extends "apostrophe-modal:base.html" -%}
{%- import "apostrophe-modal:macros.html" as modals -%}
{%- import "piecesMacros.html" as pieces with context -%}
{%- import 'apostrophe-ui:components/buttons.html' as buttons -%}

{%- block modalClass -%}
  {{ (data.options.name + '-manager') | css }} apos-ui-modal-no-sidebar apos-manager
{%- endblock -%}

{%- block controls -%}
  {{ pieces.manageControls() }}
{%- endblock -%}

{%- block instructions -%}
  {{ __('You can select content to display by searching for the titles of individual %s, or tags.', __(data.options.pluralLabel |  d(''))) }}
{%- endblock -%}

{%- block filters -%}
  {# ajax populates me #}
  <div class="apos-clearfix apos-modal-filters-inner" data-filters>
  </div>
{%- endblock -%}

{%- block label -%}
  {{ __('Manage %s', __(data.options.pluralLabel | d(''))) }}
{%- endblock -%}

{%- block body -%}
  <div class="apos-manage-view" data-apos-manage-view>
    {# ajax populates me with either the grid view or the table view #}
  </div>
{%- endblock -%}

{%- block footer -%}
  <div data-batch apos-manage-batch-operations>
    <select name="batch-operation" class="apos-manage-batch-operations-select">
      {% for operation in data.options.batchOperations %}
        <option value="{{ operation.name }}">
          {{ __('%s Selected', operation.label) }} (0)
        </option>
      {% endfor %}
    </select>
    {% if apos.utils.filterNonempty(data.options.batchOperations, 'string') %}
      <div class="apos-manage-batch-operations-strings">
    {% endif %}
    {% for operation in data.options.batchOperations %}
      {% if operation.string %}
        <div data-apos-batch-string="{{ operation.name }}" class="apos-manage-batch-operations-string">
          <label>{{ operation.string.label }}</label>
          <input name="{{ operation.name }}-string" />
        </div>
      {% endif %}
    {% endfor %}
    {% if apos.utils.filterNonempty(data.options.batchOperations, 'string') %}
      </div>
    {% endif %}
    <div class="apos-manage-batch-operations-buttons">
      {% for operation in data.options.batchOperations %}
        {{ buttons.danger(__('Batch %s', operation.buttonLabel or operation.label), { action: 'batch', value: operation.name }) }}
      {% endfor %}
    </div>
  </div>
  <div data-pager></div>
{%- endblock -%}
