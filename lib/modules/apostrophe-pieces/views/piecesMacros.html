{# This macro must be imported 'with context' from a pieces module #}
{# subclass. -Tom #}



{# bring in modals #}
{%- import "apostrophe-modal:macros.html" as modals -%}
{# bring in buttons #}Add
{% import 'apostrophe-ui:components/buttons.html' as buttons with context %}

{%- macro editControls() -%}
  {{ buttons.minor('Cancel', { action: 'cancel' }) }}
  {{ buttons.minor('Trash', { action: 'trash' }) }}
  {{ buttons.minor('Versions', { action: 'versions' }) }}
  {{ buttons.minor('Copy', { action: 'copy' }) }}
  {{ buttons.major('Save ' + data.options.label, { action: 'save' }) }}
{%- endmacro -%}

{%- macro manageControls() -%}
  {% if data.chooser %}
    {{ buttons.minor('Cancel', { action: 'cancel' }) }}
    {# "New" is less ambiguous than "Add" when you're already *choosing* things. -Tom #}
    {{ buttons.minor('New ' + data.options.label, { action: 'create-' + data.options.name }) }}
    {{ buttons.major('Save Choices', { action: 'save' }) }}
  {% else %}
    {# Technically it's "just" a cancel button but it's actually the most frequent action #}
    {# when you're just managing stuff. There is no risk of losing work. -Tom #}
    {{ buttons.major('Done', { action: 'cancel' }) }}
    {{ buttons.major('Add ' + data.options.label, { action: 'create-' + data.options.name }) }}
  {% endif %}
{%- endmacro -%}

{%- macro pill(name, choices, state) -%}
  <span class="apos-pill" data-pill data-name="{{ name }}">
    {%- for pill in choices -%}
      {# leading spaces on classes prevent concatenation
      #}<a class="apos-pill-choice {% if loop.first %} apos-first{% endif %}{% if loop.last %} apos-last{% endif %}{% if pill.value == state %} apos-active{% endif %}" href="#" data-{{ name }}="{{ pill.value }}">{{ __(pill.label) }}</a>
    {%- endfor -%}
  </span>
{%- endmacro -%}

{%- macro filters(filters, cursor) -%}
  {%- for filter in filters -%}
    {{ pill(filter.name, module.stringifyBooleanFilterChoices(filter.choices), module.stringifyBooleanFilterValue(cursor.get(filter.name))) }}
  {%- endfor -%}
{%- endmacro -%}

