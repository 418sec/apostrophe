{%- import "apostrophe-schemas:macros.html" as schemas -%}

{% macro permissions(field) %}

<div data-permissions-overall class="apos-permissions-type">
  <h4>Overall</h4>
  <div class="apos-permissions-type-checkboxes">
    <label for="admin"><input type="checkbox" name="admin" /> Admin: All</label>
    <p class="apos-permissions-help">Allows users to do anything, including creating more users and groups.</p>
    <label for="updateany-global"><input type="checkbox" name="updateany-global" /> Edit Global Preferences and Content</label>
    <p class="apos-permissions-help"> Allows users to edit the global preferences of the site, as well as editing shared headers, shared footers, etc.</p>
    <label for="guest"><input type="checkbox" name="guest" /> View content marked "Login Required"</label>
    <p class="apos-permissions-help">Allows users to view content of various types when it is marked "Login Required." You can also use the "Certain People" setting for fine-tuned privacy.</p>
  </div>
</div>

{% for type in apos.modules['apostrophe-permissions-schema-field'].types() %}
  <div data-permissions="{{ type.name }}" class="apos-permissions-type">
    <h4>{{ type.pluralLabel }}</h4>
    <p>
      <input type="checkbox" data-verb="insert" name="insert-{{ type.name }}" class="apos-first" /> Create New
      <input type="checkbox" data-verb="updateany" name="updateany-{{ type.name }}" /> Edit Any 
      {% if type.name == 'apostrophe-page' %}
        <span data-move-clause><input type="checkbox" data-verb="move" name="move-{{ type.name }}" /> ... And Move {{ type.pluralLabel }}</span>
      {% endif %}
      <span data-trash-clause><input type="checkbox" data-verb="trash" name="trash-{{ type.name }}" /> ... And Trash {{ type.pluralLabel }}</span>
    </p>
    <p data-update-clause class="apos-permissions-update-clause">
      <input type="checkbox" data-verb="update" name="update-{{ type.name }}" /> Users may also be explicitly
      granted permission to edit specific {{ type.pluralLabel | lower }}, including those they created
    </p>
    {# JavaScript will hide all but one of these h5's per the combination
       of permissions given #}
    {% if type.name == 'apostrophe-page' %}
      <h5>Summary: 
        <span class="apos-permissions-summary" data-permissions-summary="updateany">Allows users to edit all {{ type.pluralLabel | lower }}, <span class="apos-permissions-no">but not create them, move them or trash them.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="updateany insert">
          Allows users to edit all {{ type.pluralLabel | lower }} and to create new ones, <span class="apos-permissions-no">but not move them or trash them.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="updateany trash">
          Allows users to edit all {{ type.pluralLabel | lower }} and trash them, <span class="apos-permissions-no">but not move them or insert new ones.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="updateany insert trash">
          Allows users to create {{ type.pluralLabel | lower }}, edit existing ones, and trash them, <span class="apos-permissions-no">but not move them.</span>

        </span>
        <span class="apos-permissions-summary" data-permissions-summary="insert">
          Allows users to create new {{ type.pluralLabel | lower }}. <span class="apos-permissions-no">They cannot edit them, move them or trash them.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="update">
          Allows users to edit {{ type.pluralLabel | lower }} for which they have been explicitly given permission, one by one. <span class="apos-permissions-no">They cannot edit any others, create new ones, move them or trash them.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="update trash">
          Allows users to edit {{ type.pluralLabel | lower }} for which they have been explicitly given permission, one by one, and trash those those specific {{ type.pluralLabel | lower }}.<span class="apos-permissions-no">They cannot edit any others, create new ones, or move them.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="update insert">
          Allows users to create new {{ type.pluralLabel | lower }}. They can also edit those they created, and those for which they have been explicitly given permission. <span class="apos-permissions-no">They cannot move them or trash them.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="update insert trash">
          Allows users to create new {{ type.pluralLabel | lower }}. They can also edit those they created, move those they created to to the trash, and do the same things to {{ type.pluralLabel | lower }} for which they have been explicitly granted permission. <span class="apos-permissions-no">They cannot move them.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="updateany move">Allows users to edit and move all {{ type.pluralLabel | lower }}, <span class="apos-permissions-no">but not create them or trash them.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="updateany insert move">
          Allows users to edit all {{ type.pluralLabel | lower }}, create new ones and move them, <span class="apos-permissions-no">but not trash them.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="updateany trash move">
          Allows users to edit all {{ type.pluralLabel | lower }}, move them and trash them, <span class="apos-permissions-no">but not insert new ones.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="updateany insert trash move">
          Allows users to create {{ type.pluralLabel | lower }}, edit existing ones, move them and trash them.
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="update move">
          Allows users to edit {{ type.pluralLabel | lower }} for which they have been explicitly given permission, one by one, and also move them. <span class="apos-permissions-no">They cannot edit any others, create new ones, or trash them.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="update trash move">
          Allows users to edit {{ type.pluralLabel | lower }} for which they have been explicitly given permission, one by one, and also move or trash those those specific {{ type.pluralLabel | lower }}.<span class="apos-permissions-no">They cannot edit any others, or create new ones.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="update insert move">
          Allows users to create new {{ type.pluralLabel | lower }}. They can also edit and move those they created, and those for which they have been explicitly given permission. <span class="apos-permissions-no">They cannot trash them.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="update insert trash move">
          Allows users to create new {{ type.pluralLabel | lower }}. They can also edit those they created, move or trash those they have created, and do the same things to {{ type.pluralLabel | lower }} for which they have been explicitly granted permission.
        </span>
      </h5>
    {% else %}
      <h5>Summary: 
        <span class="apos-permissions-summary" data-permissions-summary="updateany">Allows users to edit all {{ type.pluralLabel | lower }}, <span class="apos-permissions-no">but not create a new one or move one to the trash.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="updateany insert">
          Allows users to edit all {{ type.pluralLabel | lower }} and to create new ones, <span class="apos-permissions-no">but not move one to the trash.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="updateany trash">
          Allows users to edit all {{ type.pluralLabel | lower }} and move them to the trash, <span class="apos-permissions-no">but not create new ones.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="updateany insert trash">
          Allows users to create {{ type.pluralLabel | lower }}, edit existing ones, and move them to the trash.
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="insert">
          Allows users to create new {{ type.pluralLabel | lower }}. <span class="apos-permissions-no">They cannot edit them or move them to the trash.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="update">
          Allows users to edit {{ type.pluralLabel | lower }} for which they have been explicitly given permission, one by one. <span class="apos-permissions-no">They cannot edit any others, create new ones, or move them to the trash.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="update trash">
          Allows users to edit {{ type.pluralLabel | lower }} for which they have been explicitly given permission, one by one, and move those specific {{ type.pluralLabel | lower }} to the trash.<span class="apos-permissions-no">They cannot edit any others, or create new ones.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="update insert">
          Allows users to create new {{ type.pluralLabel | lower }}. They can also edit those they created, and those for which they have been explicitly given permission. <span class="apos-permissions-no">They cannot move them to the trash.</span>
        </span>
        <span class="apos-permissions-summary" data-permissions-summary="update insert trash">
          Allows users to create new {{ type.pluralLabel | lower }}. They can also edit those they created, move those they created to to the trash, and do the same things to {{ type.pluralLabel | lower }} for which they have been explicitly granted permission.
        </span>
      </h5>
    {% endif %}
  </div>
{% endfor %}

{# Usually implied by something else, so placed here at the end and will be hidden by js
   if implied by other selections #}

<div data-permissions-attachments>
  <h4>Attachments</h4>
  <p><input type="checkbox" name="edit-attachment" /> Upload and crop attachments</p>
</div>
{% endmacro %}

{{ schemas.fieldset(data, permissions) }}

